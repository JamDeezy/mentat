<!DOCTYPE html>
<meta charset="utf-8">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.6/paper/bootstrap.min.css">
<style>
#container {
  width: 960px;
  height: 640px;
  margin: 20px;
}

</style>
<body>
  <div id="container"></div>
</body>
<script src="../mentat.js"></script>
<script>
  var data = [ // array of data points
    { province: 'ab', clicks: Math.random() * 100 },
    { province: 'bc', clicks: Math.random() * 100 },
    { province: 'mb', clicks: Math.random() * 100 },
    { province: 'nb', clicks: Math.random() * 100 },
    { province: 'nl', clicks: Math.random() * 100 },
    { province: 'nt', clicks: Math.random() * 100 },
    { province: 'ns', clicks: Math.random() * 100 },
    { province: 'on', clicks: 99 },
    { province: 'pe', clicks: Math.random() * 100 },
    { province: 'qc', clicks: Math.random() * 100 },
    { province: 'sk', clicks: Math.random() * 100 },
    { province: 'on', clicks: 55 },
    { province: 'nu', clicks: Math.random() * 100 },
  ]

  mentat(
    '#container', 'choropleth', data,
    { dimension: 'province', metric: 'clicks' },
    {
      country: 'ca',
      scale: function(dp, extent) {
        // d3 log interpolation breaks on 0
        extent[0] = (extent[0] == 0) ? 1 : extent[0]

        var log =
          d3.scale.log()
            .domain(extent)
            .range(['#C6DBEF', '#08519C']),
            value = (dp.value == 0) ? 1 : dp.value;

        return log(dp.value);
      }
    }
  )
</script>
